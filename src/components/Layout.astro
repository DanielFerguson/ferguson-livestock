---
import "../styles/global.css";

interface Props {
    title: string;
    description?: string;
    image?: string;
    canonicalUrl?: string;
}

const {
    title,
    description = "Premium pasture-raised Murray Grey beef boxes delivered direct from our family farm in Snake Valley, Victoria. Hormone-free, ethically raised cattle.",
    image = "/og-image.jpg",
    canonicalUrl,
} = Astro.props;

const siteUrl = "https://fergusonlivestock.com.au";
const fullImageUrl = image.startsWith("http") ? image : `${siteUrl}${image}`;
const canonical = canonicalUrl || Astro.url.href;
---

<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <!-- Primary Meta Tags -->
        <title>{title}</title>
        <meta name="title" content={title} />
        <meta name="description" content={description} />
        <link rel="canonical" href={canonical} />

        <!-- Favicon & PWA -->
        <link
            rel="apple-touch-icon"
            sizes="180x180"
            href="/apple-touch-icon.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="32x32"
            href="/favicon-32x32.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="16x16"
            href="/favicon-16x16.png"
        />
        <link rel="manifest" href="/site.webmanifest" />

        <!-- Mobile Browser Theme -->
        <meta name="theme-color" content="#2d3b2d" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="default" />
        <meta name="apple-mobile-web-app-title" content="Ferguson Livestock" />
        <meta name="mobile-web-app-capable" content="yes" />

        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="website" />
        <meta property="og:url" content={canonical} />
        <meta property="og:title" content={title} />
        <meta property="og:description" content={description} />
        <meta property="og:image" content={fullImageUrl} />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="630" />
        <meta property="og:image:type" content="image/jpeg" />
        <meta property="og:site_name" content="Ferguson Livestock" />
        <meta property="og:locale" content="en_AU" />

        <!-- Twitter -->
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:url" content={canonical} />
        <meta name="twitter:title" content={title} />
        <meta name="twitter:description" content={description} />
        <meta name="twitter:image" content={fullImageUrl} />
        <meta name="twitter:image:width" content="1200" />
        <meta name="twitter:image:height" content="630" />

        <!-- Additional SEO -->
        <meta name="robots" content="index, follow" />
        <meta name="author" content="Ferguson Livestock" />
        <meta name="geo.region" content="AU-VIC" />
        <meta name="geo.placename" content="Snake Valley" />
        <link rel="icon" type="image/x-icon" href="/favicon.ico" />

        <!-- Fonts with display swap for better LCP -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Source+Sans+3:wght@300;400;500;600&display=swap"
            rel="stylesheet"
        />

        <!-- Google Analytics -->
        <script
            is:inline
            async
            src="https://www.googletagmanager.com/gtag/js?id=G-EZVFVWV5YQ"
        ></script>
        <script is:inline>
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag("js", new Date());
            gtag("config", "G-EZVFVWV5YQ");
        </script>

        <!-- JSON-LD Structured Data -->
        <script
            type="application/ld+json"
            set:html={JSON.stringify({
                "@context": "https://schema.org",
                "@graph": [
                    {
                        "@type": "Organization",
                        "@id": `${siteUrl}/#organization`,
                        name: "Ferguson Livestock",
                        url: siteUrl,
                        logo: {
                            "@type": "ImageObject",
                            url: `${siteUrl}/android-chrome-512x512.png`,
                            width: 512,
                            height: 512,
                        },
                        image: `${siteUrl}/og-image.jpg`,
                        sameAs: [
                            "https://www.facebook.com/FergusonLivestockMG",
                        ],
                        contactPoint: {
                            "@type": "ContactPoint",
                            telephone: "+61427458706",
                            contactType: "sales",
                            areaServed: "AU",
                            availableLanguage: "English",
                        },
                    },
                    {
                        "@type": ["LocalBusiness", "FoodEstablishment"],
                        "@id": `${siteUrl}/#localbusiness`,
                        name: "Ferguson Livestock",
                        description:
                            "Family-owned Murray Grey cattle farm offering premium pasture-raised beef boxes direct to consumers in Ballarat and surrounding areas.",
                        url: siteUrl,
                        telephone: "+61427458706",
                        email: "ferguson.livestock.mg@outlook.com",
                        image: `${siteUrl}/og-image.jpg`,
                        address: {
                            "@type": "PostalAddress",
                            addressLocality: "Snake Valley",
                            addressRegion: "VIC",
                            postalCode: "3351",
                            addressCountry: "AU",
                        },
                        geo: {
                            "@type": "GeoCoordinates",
                            latitude: -37.5833,
                            longitude: 143.6833,
                        },
                        areaServed: [
                            {
                                "@type": "City",
                                name: "Ballarat",
                                sameAs: "https://en.wikipedia.org/wiki/Ballarat",
                            },
                            {
                                "@type": "Place",
                                name: "Snake Valley",
                            },
                            {
                                "@type": "Place",
                                name: "Smythesdale",
                            },
                            {
                                "@type": "Place",
                                name: "Buninyong",
                            },
                        ],
                        priceRange: "$$",
                        currenciesAccepted: "AUD",
                        paymentAccepted: "Credit Card, Bank Transfer",
                        servesCuisine: "Beef",
                        hasOfferCatalog: {
                            "@type": "OfferCatalog",
                            name: "Beef Boxes",
                            itemListElement: [
                                {
                                    "@type": "Offer",
                                    itemOffered: {
                                        "@type": "Product",
                                        name: "5kg Beef Box",
                                    },
                                },
                                {
                                    "@type": "Offer",
                                    itemOffered: {
                                        "@type": "Product",
                                        name: "10kg Beef Box",
                                    },
                                },
                            ],
                        },
                    },
                    {
                        "@type": "Product",
                        "@id": `${siteUrl}/#product`,
                        name: "Ferguson Livestock Beef Box",
                        description:
                            "Premium pasture-raised Murray Grey beef box containing a variety of cuts including steaks, roasts, mince, and sausages. Vacuum-sealed and delivered fresh from our family farm.",
                        image: `${siteUrl}/og-image.jpg`,
                        brand: {
                            "@type": "Brand",
                            name: "Ferguson Livestock",
                        },
                        offers: {
                            "@type": "AggregateOffer",
                            availability: "https://schema.org/PreOrder",
                            priceCurrency: "AUD",
                            lowPrice: "150",
                            highPrice: "300",
                            offerCount: "2",
                            areaServed: {
                                "@type": "State",
                                name: "Victoria",
                                sameAs: "https://en.wikipedia.org/wiki/Victoria_(state)",
                            },
                        },
                        category: "Beef",
                        material: "Pasture-raised Murray Grey beef",
                        additionalProperty: [
                            {
                                "@type": "PropertyValue",
                                name: "Breed",
                                value: "Murray Grey",
                            },
                            {
                                "@type": "PropertyValue",
                                name: "Raised",
                                value: "Pasture-raised",
                            },
                            {
                                "@type": "PropertyValue",
                                name: "Hormones",
                                value: "No added hormones",
                            },
                            {
                                "@type": "PropertyValue",
                                name: "Aged",
                                value: "Dry-aged 7-10 days",
                            },
                        ],
                    },
                    {
                        "@type": "WebSite",
                        "@id": `${siteUrl}/#website`,
                        url: siteUrl,
                        name: "Ferguson Livestock",
                        description:
                            "Premium pasture-raised Murray Grey beef boxes delivered direct from our family farm in Snake Valley, Victoria.",
                        publisher: {
                            "@id": `${siteUrl}/#organization`,
                        },
                        inLanguage: "en-AU",
                    },
                    {
                        "@type": "WebPage",
                        "@id": `${siteUrl}/#webpage`,
                        url: siteUrl,
                        name: title,
                        description: description,
                        isPartOf: {
                            "@id": `${siteUrl}/#website`,
                        },
                        about: {
                            "@id": `${siteUrl}/#localbusiness`,
                        },
                        primaryImageOfPage: {
                            "@type": "ImageObject",
                            url: `${siteUrl}/og-image.jpg`,
                        },
                    },
                ],
            })}
        />
    </head>
    <body class="bg-cream text-gray-800 leading-relaxed overflow-x-hidden">
        <!-- Skip to main content link for accessibility -->
        <a
            href="#main-content"
            class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-forest focus:text-cream focus:rounded-lg focus:outline-none focus:ring-2 focus:ring-mint"
        >
            Skip to main content
        </a>
        <slot />
    </body>
</html>
