---
import { Image } from "astro:assets";
import heroImage from "../assets/images/cows-10.webp";
---

<main id="main-content">
    <section
        id="pre-order"
        class="noise-overlay relative min-h-[90vh] flex items-center py-16 lg:py-24 overflow-hidden"
    >
        <!-- Background Image with Parallax -->
        <div id="hero-bg" class="absolute inset-0 -z-20 will-change-transform" style="top: -10%; height: 120%;">
            <Image
                src={heroImage}
                alt=""
                class="w-full h-full object-cover"
                widths={[800, 1200, 1600, 2000]}
                sizes="100vw"
                loading="eager"
            />
        </div>
        <!-- Gradient Overlay -->
        <div
            class="absolute inset-0 -z-10 bg-linear-to-br from-forest/95 via-forest-light/90 to-sage/85"
        >
        </div>
        <div class="max-w-6xl mx-auto px-6 relative z-10">
            <div class="grid lg:grid-cols-2 gap-12 lg:gap-16 items-center">
                <!-- Left Column - Value Prop -->
                <div class="text-cream">
                    <div
                        class="animate-fade-in-up inline-flex items-center gap-2 bg-mint/15 border border-mint/30 px-4 py-2 rounded-full text-sm font-medium text-mint-light mb-6"
                    >
                        <svg class="w-4 h-4 fill-current" viewBox="0 0 24 24"
                            ><path
                                d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
                            ></path></svg
                        >
                        Pasture-Raised Murray Grey Beef
                    </div>
                    <h1
                        class="animate-fade-in-up animation-delay-100 font-display text-4xl md:text-5xl lg:text-6xl font-semibold leading-tight tracking-tight mb-6"
                    >
                        Paddock to Door&nbsp;<br class="hidden lg:block" />Beef
                        Boxes,&nbsp;<br class="hidden md:block" /><em
                            class="not-italic text-mint-light"
                            >Delivered by Us</em
                        >
                    </h1>
                    <p
                        class="animate-fade-in-up animation-delay-200 text-lg text-cream/85 mb-8 max-w-xl leading-relaxed"
                    >
                        Premium pasture-raised beef from our family farm in
                        Snake Valley, personally delivered to your door. No
                        middlemen. No supermarkets. Just quality beef you can
                        trust.
                    </p>
                    <div
                        class="animate-fade-in-up animation-delay-300 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4"
                    >
                        <div class="flex items-center gap-2.5 text-cream">
                            <svg
                                class="w-5 h-5 fill-mint flex-shrink-0"
                                viewBox="0 0 24 24"
                                ><path
                                    d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"
                                ></path></svg
                            >Pasture-Raised & Hormone-Free
                        </div>
                        <div class="flex items-center gap-2.5 text-cream">
                            <svg
                                class="w-5 h-5 fill-mint flex-shrink-0"
                                viewBox="0 0 24 24"
                                ><path
                                    d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"
                                ></path></svg
                            >No Feedlots, Ever
                        </div>
                        <div class="flex items-center gap-2.5 text-cream">
                            <svg
                                class="w-5 h-5 fill-mint flex-shrink-0"
                                viewBox="0 0 24 24"
                                ><path
                                    d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"
                                ></path></svg
                            >Free Personal Delivery
                        </div>
                        <div class="flex items-center gap-2.5 text-cream">
                            <svg
                                class="w-5 h-5 fill-mint flex-shrink-0"
                                viewBox="0 0 24 24"
                                ><path
                                    d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"
                                ></path></svg
                            >Supporting Local Farmers
                        </div>
                    </div>
                </div>

                <!-- Right Column - Pricing Cards -->
                <div class="animate-fade-in-up animation-delay-400 space-y-6">
                    <!-- Delivery Info Banner -->
                    <div class="bg-mint/20 border border-mint/30 rounded-xl px-5 py-4 text-center">
                        <p class="text-cream font-medium">
                            <svg class="w-5 h-5 fill-mint-light inline-block mr-2 -mt-0.5" viewBox="0 0 24 24">
                                <path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path>
                            </svg>
                            Delivered <strong>Friday 13th & Saturday 14th February</strong>
                        </p>
                        <p class="text-mint-light text-sm mt-1">Free delivery to Ballarat and surrounding areas</p>
                    </div>

                    <!-- Pricing Cards -->
                    <div class="grid gap-4">
                        <!-- 5kg Box -->
                        <div class="relative bg-cream rounded-2xl p-6 shadow-xl shadow-black/20">
                            <div class="absolute -inset-0.5 bg-linear-to-br from-mint to-sage rounded-2xl -z-10 opacity-40"></div>
                            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                                <div>
                                    <div class="flex items-baseline gap-2 mb-1">
                                        <h3 class="font-display text-2xl font-semibold text-forest">5kg Beef Box</h3>
                                        <span class="text-sm text-sage font-medium">$34/kg</span>
                                    </div>
                                    <p class="text-3xl font-bold text-forest mb-2">$170</p>
                                    <p class="text-sm text-gray-500">Mixed cuts: steaks, roasts, mince & sausages</p>
                                </div>
                                <a
                                    href="https://buy.stripe.com/test_cNi3cv7YKdRD6q21ef4sE05"
                                    target="_blank"
                                    rel="noopener"
                                    class="inline-flex items-center justify-center gap-2 bg-linear-to-br from-forest to-sage text-cream px-6 py-3 rounded-lg font-semibold text-sm uppercase tracking-wider transition-all duration-300 hover:-translate-y-0.5 hover:shadow-xl hover:shadow-forest/30 whitespace-nowrap"
                                    onclick="if(typeof gtag==='function'){gtag('event','begin_checkout',{currency:'AUD',value:170,items:[{item_name:'5kg Beef Box',price:170}]});}"
                                >
                                    Pre-Order
                                    <svg class="w-4 h-4 fill-current" viewBox="0 0 24 24">
                                        <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path>
                                    </svg>
                                </a>
                            </div>
                        </div>

                        <!-- 10kg Box - Featured -->
                        <div class="relative bg-cream rounded-2xl p-6 shadow-xl shadow-black/20">
                            <div class="absolute -inset-0.5 bg-linear-to-br from-warm to-warm-dark rounded-2xl -z-10 opacity-60"></div>
                            <div class="absolute -top-3 left-6 bg-warm text-white text-xs font-bold uppercase tracking-wider px-3 py-1 rounded-full">
                                Best Value
                            </div>
                            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mt-2">
                                <div>
                                    <div class="flex items-baseline gap-2 mb-1">
                                        <h3 class="font-display text-2xl font-semibold text-forest">10kg Beef Box</h3>
                                        <span class="text-sm text-warm-dark font-medium">$28/kg</span>
                                    </div>
                                    <p class="text-3xl font-bold text-forest mb-2">$280</p>
                                    <p class="text-sm text-gray-500">Mixed cuts: steaks, roasts, mince & sausages</p>
                                </div>
                                <a
                                    href="https://buy.stripe.com/test_4gM7sLbaWdRDdSu9KL4sE04"
                                    target="_blank"
                                    rel="noopener"
                                    class="inline-flex items-center justify-center gap-2 bg-linear-to-br from-warm to-warm-dark text-white px-6 py-3 rounded-lg font-semibold text-sm uppercase tracking-wider transition-all duration-300 hover:-translate-y-0.5 hover:shadow-xl hover:shadow-warm/30 whitespace-nowrap"
                                    onclick="if(typeof gtag==='function'){gtag('event','begin_checkout',{currency:'AUD',value:280,items:[{item_name:'10kg Beef Box',price:280}]});}"
                                >
                                    Pre-Order
                                    <svg class="w-4 h-4 fill-current" viewBox="0 0 24 24">
                                        <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path>
                                    </svg>
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Urgency Message -->
                    <div class="flex items-center justify-center gap-2 text-cream/80 text-sm">
                        <svg class="w-4 h-4 fill-mint-light" viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"></path>
                        </svg>
                        Limited boxes available â€” order early to secure yours
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // Parallax effect for hero background
        const heroBg = document.getElementById('hero-bg');
        if (heroBg) {
            const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            if (!prefersReducedMotion) {
                window.addEventListener('scroll', () => {
                    const scrollY = window.scrollY;
                    heroBg.style.transform = `translateY(${scrollY * 0.4}px)`;
                }, { passive: true });
            }
        }

        // Declare gtag as global (loaded in Layout)
        declare const gtag: (...args: any[]) => void;

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
            anchor.addEventListener("click", function (e) {
                e.preventDefault();
                const href = (
                    e.currentTarget as HTMLAnchorElement
                ).getAttribute("href");
                if (href) {
                    const target = document.querySelector(href);
                    if (target)
                        target.scrollIntoView({
                            behavior: "smooth",
                            block: "start",
                        });
                }
            });
        });
    </script>
</main>
